<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SULTAN TYPER BOSS | PROFESSIONAL</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00ff88; --error: #ff4757; --bg: #0a0e14;
            --surface: #161b22; --text-dim: rgba(255, 255, 255, 0.15);
        }

        body.theme-blue { --primary: #00d2ff; }
        body.theme-gold { --primary: #f1c40f; }
        body.theme-purple { --primary: #a55eea; }
        body.theme-orange { --primary: #ff9f43; }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }
        body {
            background-color: var(--bg); color: white; font-family: 'Cairo', sans-serif;
            min-height: 100vh; display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden; transition: background 0.5s;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.25; }

        .ad-banner-top {
            width: 100%; max-width: 728px; min-height: 90px; margin: 20px auto;
            display: flex; align-items: center; justify-content: center;
        }

        .ad-banner-bottom {
            width: 100%; max-width: 300px; min-height: 250px; margin: 30px auto;
            display: flex; align-items: center; justify-content: center;
        }

        .main-container {
            width: 95%; max-width: 1000px; padding: 30px; border-radius: 40px;
            background: var(--surface); position: relative;
            box-shadow: 0 30px 80px rgba(0,0,0,0.6); margin-top: 10px;
            border: 1px solid rgba(255,255,255,0.03);
        }

        .typing-engine {
            position: relative; min-height: 120px; margin-bottom: 30px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; line-height: 1.6; text-align: center;
        }

        #text-display { width: 100%; position: relative; z-index: 2; white-space: pre-wrap; color: var(--text-dim); }
        .char-correct { color: var(--primary); text-shadow: 0 0 10px var(--primary); }
        .char-wrong { color: var(--error); background: rgba(255, 71, 87, 0.2); }
        #hidden-input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; z-index: 10; cursor: pointer; }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; width: 100%; }
        .stat-box { background: rgba(255,255,255,0.02); padding: 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); text-align: center; }
        .stat-val { display: block; font-size: 1.8rem; font-weight: 900; color: var(--primary); font-family: 'Orbitron'; }
        .stat-lab { font-size: 0.6rem; opacity: 0.4; letter-spacing: 1px; }

        .xp-area { margin-top: 25px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 20px; }
        .xp-top { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 900; font-size: 0.8rem; }
        .xp-track { width: 100%; height: 8px; background: #000; border-radius: 50px; overflow: hidden; }
        #xp-bar { width: 0%; height: 100%; background: var(--primary); transition: 0.6s ease-out; }

        .controls { display: flex; gap: 10px; margin-top: 20px; justify-content: center; flex-wrap: wrap; }
        .btn {
            background: transparent; border: 1px solid var(--primary); color: white;
            padding: 8px 20px; border-radius: 12px; cursor: pointer; font-family: 'Cairo';
            font-size: 0.8rem; transition: 0.3s;
        }
        .btn:hover { background: var(--primary); color: #000; box-shadow: 0 0 15px var(--primary); }

        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }
        .apply-shake { animation: shake 0.15s infinite; }
        
        @media (max-width: 600px) {
            .typing-engine { font-size: 1.4rem; }
            .ad-banner-top { display: none; } /* Ø¥Ø®ÙØ§Ø¡ Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        }
    </style>
</head>
<body>

    <div class="ad-banner-top">
        <script type="text/javascript">
            atOptions = {
                'key' : 'cdbb165bb2d7073ba2573bea978a2d8d',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/cdbb165bb2d7073ba2573bea978a2d8d/invoke.js"></script>
    </div>

    <canvas id="bg-canvas"></canvas>

    <h1 style="font-family: 'Orbitron'; font-size: 2rem; margin: 10px 0; color: var(--primary); text-shadow: 0 0 15px var(--primary);">SULTAN TYPER</h1>

    <div class="main-container" id="game-box">
        <div class="typing-engine">
            <div id="text-display">Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØ­Ø¯ÙŠ...</div>
            <input type="text" id="hidden-input" autofocus autocomplete="off" spellcheck="false">
        </div>

        <div class="stats-grid">
            <div class="stat-box"><span class="stat-val" id="wpm">0</span><span class="stat-lab">WPM</span></div>
            <div class="stat-box"><span class="stat-val" id="acc">100</span><span class="stat-lab">ACC %</span></div>
            <div class="stat-box"><span class="stat-val" id="lvl">1</span><span class="stat-lab">LEVEL</span></div>
            <div class="stat-box"><span class="stat-val" id="best">0</span><span class="stat-lab">BEST</span></div>
        </div>

        <div class="xp-area">
            <div class="xp-top">
                <span id="rank-tag" style="color: var(--primary);">RANK: NOOB ğŸ¢</span>
                <span id="xp-status">0 / 100 XP</span>
            </div>
            <div class="xp-track"><div id="xp-bar"></div></div>
        </div>

        <div class="controls">
            <button class="btn" onclick="switchTheme()">Ø«ÙŠÙ… ğŸ¨</button>
            <button class="btn" onclick="startNewLevel()">Ø¬Ø¯ÙŠØ¯ ğŸ”„</button>
        </div>
    </div>

    <div class="ad-banner-bottom">
        <script type="text/javascript">
            atOptions = {
                'key' : 'd36063c799c71ec48bf58ef50fc2b919',
                'format' : 'iframe',
                'height' : 250,
                'width' : 300,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/d36063c799c71ec48bf58ef50fc2b919/invoke.js"></script>
    </div>

<script>
    const sentences = [
        "Ø§Ù„Ù†Ø§Ø¬Ø­ÙˆÙ† Ù„Ø§ ÙŠÙ†ØªØ¸Ø±ÙˆÙ† Ø§Ù„ÙØ±Øµ Ø¨Ù„ ÙŠØµÙ†Ø¹ÙˆÙ†Ù‡Ø§ Ø¨Ø£Ù†ÙØ³Ù‡Ù… Ø¯Ø§Ø¦Ù…Ø§Ù‹.",
        "Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù‡Ùˆ Ø§Ù„Ø³Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù…Ø©.",
        "Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù‡ÙŠ Ø§Ù„ÙÙ† Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ù…Ù†Ø·Ù‚ ÙˆØ§Ù„Ø®ÙŠØ§Ù„.",
        "Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ù‚ÙˆÙŠ ÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø­Ù„ÙˆÙ„ ÙˆØ§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ø¶Ø¹ÙŠÙ ÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø¹Ø°Ø§Ø±.",
        "Ø³Ù„Ø·Ø§Ù† Ù…Ø¨Ø±Ù…Ø¬ Ø³ÙˆØ±ÙŠ Ù…ØªÙ…ÙŠØ² ÙŠÙ…ØªÙ„Ùƒ Ø·Ù…ÙˆØ­Ø§Ù‹ ÙŠØ¹Ø§Ù†Ù‚ Ø§Ù„Ø³Ù…Ø§Ø¡.",
        "ÙƒÙ† ÙØ®ÙˆØ±Ø§Ù‹ Ø¨ÙƒÙ„ Ø®Ø·ÙˆØ© ØªØ®Ø·ÙˆÙ‡Ø§ Ù†Ø­Ùˆ ØªØ­Ù‚ÙŠÙ‚ Ø£Ø­Ù„Ø§Ù…Ùƒ Ø§Ù„ÙƒØ¨ÙŠØ±Ø©.",
        "Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù‡Ùˆ Ø§Ù„Ø³Ù„Ø§Ø­ Ø§Ù„Ø£Ù‚ÙˆÙ‰ ÙÙŠ Ù…ÙˆØ§Ø¬Ù‡Ø© ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø¹ØµØ±.",
        "Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ÙŠÙ†ØªÙ…ÙŠ Ù„Ø£ÙˆÙ„Ø¦Ùƒ Ø§Ù„Ø°ÙŠÙ† ÙŠØ¤Ù…Ù†ÙˆÙ† Ø¨Ø¬Ù…Ø§Ù„ Ø£Ø­Ù„Ø§Ù…Ù‡Ù… Ø§Ù„ÙŠÙˆÙ…."
    ];

    let targetSentence = "", startTime = null, timer = null, xpPoints = 0, currentLevel = 1;
    let bestRecord = localStorage.getItem('sultan_pro_best') || 0;
    const themes = ['', 'theme-blue', 'theme-gold', 'theme-purple', 'theme-orange'];
    let themeIdx = 0;

    const inputField = document.getElementById('hidden-input');
    const displayArea = document.getElementById('text-display');
    const gameBox = document.getElementById('game-box');

    function startNewLevel() {
        targetSentence = sentences[Math.floor(Math.random() * sentences.length)];
        renderText("");
        inputField.value = "";
        document.getElementById('best').innerText = bestRecord;
        clearInterval(timer);
        startTime = null;
        document.getElementById('wpm').innerText = "0";
        inputField.focus();
    }

    function renderText(currentInput) {
        let htmlContent = "";
        for (let i = 0; i < targetSentence.length; i++) {
            if (i < currentInput.length) {
                htmlContent += (currentInput[i] === targetSentence[i]) 
                    ? `<span class="char-correct">${targetSentence[i]}</span>` 
                    : `<span class="char-wrong">${targetSentence[i]}</span>`;
            } else {
                htmlContent += `<span>${targetSentence[i]}</span>`;
            }
        }
        displayArea.innerHTML = htmlContent;
    }

    inputField.addEventListener('input', () => {
        if (!startTime) {
            startTime = new Date();
            timer = setInterval(updateLiveStats, 100);
        }
        renderText(inputField.value);
        if (inputField.value.length > 0 && inputField.value[inputField.value.length - 1] !== targetSentence[inputField.value.length - 1]) {
            gameBox.classList.add('apply-shake');
            setTimeout(() => gameBox.classList.remove('apply-shake'), 150);
        }
        if (inputField.value === targetSentence) finishLevel();
    });

    function updateLiveStats() {
        const timeElapsed = (new Date() - startTime) / 60000;
        const wpm = Math.round((inputField.value.length / 5) / timeElapsed) || 0;
        document.getElementById('wpm').innerText = wpm;
        document.getElementById('acc').innerText = (inputField.value === targetSentence.substring(0, inputField.value.length)) ? 100 : 70;
    }

    function finishLevel() {
        clearInterval(timer);
        const finalWpm = parseInt(document.getElementById('wpm').innerText);
        if (finalWpm > bestRecord) {
            bestRecord = finalWpm;
            localStorage.setItem('sultan_pro_best', bestRecord);
        }
        xpPoints += 45;
        if (xpPoints >= 100) { currentLevel++; xpPoints = 0; }
        document.getElementById('lvl').innerText = currentLevel;
        document.getElementById('xp-bar').style.width = xpPoints + "%";
        document.getElementById('xp-status').innerText = xpPoints + " / 100 XP";
        updateRankDisplay(finalWpm);
        setTimeout(startNewLevel, 1200);
    }

    function updateRankDisplay(wpm) {
        let rank = "NOOB ğŸ¢";
        if (wpm > 30) rank = "FAST ğŸ‡";
        if (wpm > 60) rank = "TIGER ğŸ…";
        if (wpm > 90) rank = "BOSS ğŸ‘‘";
        document.getElementById('rank-tag').innerText = "RANK: " + rank;
    }

    function switchTheme() {
        themeIdx = (themeIdx + 1) % themes.length;
        document.body.className = themes[themeIdx];
    }

    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let dots = Array.from({length: 50}, () => ({x: Math.random()*canvas.width, y: Math.random()*canvas.height, dx: Math.random()-0.5, dy: Math.random()-0.5}));
    function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--primary');
        dots.forEach(d => {
            d.x += d.dx; d.y += d.dy;
            if(d.x<0 || d.x>canvas.width) d.dx*=-1;
            if(d.y<0 || d.y>canvas.height) d.dy*=-1;
            ctx.beginPath(); ctx.arc(d.x, d.y, 1.2, 0, 7); ctx.fill();
        });
        requestAnimationFrame(animate);
    }
    animate(); startNewLevel();
    document.addEventListener('click', () => inputField.focus());
</script>
</body>
</html>
